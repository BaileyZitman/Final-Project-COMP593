# History

This file contains a detailed summary about each session I worked on the project. Each and everytime work was completed on this project the changes and activities was logged to this file in order to keep an accurate activity summary. Each entry (number in the list) represents a different session. For each session the date is provided, the amount of time logged for that session is provided and a description of the activities completed/worked on is provided. 

**Note:** Date is presented in the format YYYY-MM-DD
**Note:** Time Logged is measured to the quarter hour and expressed in hours

1. **Date:** 2021- 03 - 17 **Time Logged:** 2 **Description:** The assignment was assigned today and to get prepared I started by creating a new repository called "Final- Project-COMP593". I also downloaded Github Broswer and configured Github to be paired with VSCode (my default editor) using a token to enable working on the repo from my host computer. This alows me to push, pull, and merge (etc...) changes made on my local machine to the repository. I also created this History file which will serve as a working log throughout the project. It uses markdown formatting and i first attempted to create a table but the formatting was not accomplishing the desired outcome. This was identified in my first test commit (to see if i could merge and if the formatting was desirable) and as such I have update the formatting of the "History.md" to not be formatted into a table but a list. The important headers are shown in **bold** text. Made a second commit to test the second attempt at formating. The formatting is acceptable. made a few modifications regarding the README.md file but it still needs to be updated down the line with functionality, constraits, and any info the user could use to better utlize the script. Took a break but didnt commit changes at this time. See next session.
   
2. **Date:** 2021- 03 - 17 **Time Logged:** 2 **Description:** Started again a few hours later. Started building the python script by producing a ***header*** and testing the connection. Thankfully my Mars Rover Script came in handy (not the test tho :/ ) and the connection was easy (already had a dev key and base, base code to work off of). I tested manipulating the data and got it to print the data i wanted to the command prompt. started the part of the script that builds the database. RIGHT NOW (may change) the database if called PBMZ-db-FP.db. Attempted to create a table and got an syntax error and sqlite execution error (caused by same thing presumably). I was correct. Firgured it out by mistake when reformatting the primary key which turns out needed to be reformatted anyways. A table has now been created in the database mentioned above called "Astronomy Image of The Day" (this will be the only table in the database). Played around with adding data to the table. had issues with unsupported type. put down for the night. I committed my changed to the ***Testing*** branch. Note: If looking through history (Github history) the python file is only in a test phase and not complete. It includes lots of testing ***errors*** (not actual errors). 

3. **Date:** 2021- 03 - 18 **Time Logged:** 1.5 **Description:** Worked away at trying to upload data from the obtained image (json object) to the table "Astronomy Image of The Day" in the database that the script also creates. The issue i was having with the unsupported type was with datetime. For some reason both integer type "datetime" and "numeric" (in the "create_AIOD_Table =" variable) didnt work and came back with that error. Wrapped the time variable (may be temporary) with ***str()*** and that did the trick. The time is outputted using the 24hr clock right down to the second currently. The python script now creates a directory called "./Saved Images" which will be used to save images to each day. This will serve as a history of previously used backgrounds. The script now has the ability to retrieve the image obtained from the internet through the requests module. I did this in my side-project over the break and already knew how so I didnt get any errors. The obtained image is saved as a ***.jpg*** or a ***.png*** depending on the url that is obtained to the directory mentioned above and created through the script. As of right now the Hash value and file size still needs to be calculated.Committed the changes to the testing branch

4. **Date:** 2021- 04-07 **Time Logged:** .25 **Description:** Tested python script and was getting a key error and noticed that copyright is not available. Removed that option from the script. Tested again and works. Did not commit changes at this time.
   
5.  **Date:** 2021- 04-11 **Time Logged:** 7 **Description:** Retested my python script and realized it is not just the copyright key that is missing in some cases all of keys will be different (in json object) depending on the day of the image.Looked up why that is and on the ["API webpage"](https://api.nasa.gov/) it mentions that the the copyright parameter is only returned when the image is not part of public domain. Redesigned my database to only save the hash, file name, file size, NON HD url, and date-time of download In the case of a video, we use the last available image instead. create a function called Connection_and_json() in the python file and that is used to make the connection and get the returned json object. I didnt run into very many issues do this because I already completed this code previously and just put it in a function for cleaner scipting and reusability. I also created a function called parse_json() that will parse the json object to determine what keys are used for that day because as mentioned aboved, they keys in the json object will be different depending on the situation. There are certian ones that will always be returned though. The function may be deleted depending on if i can make the database variable. will work on that later. Reworked my code and moved things around by modifying how the python file exectute things and in what order. Added an if statement instead to filter on json["media_type"] to establish whether the returned object is an image or video. Only append information to the database and obtain the image of the day if an image is returned. I created two additional functions, get_hash and get-size that will get the hash and size of the file corresponding the the object in question. I did google how to complete these steps and found this [webpage](https://www.journaldev.com/32067/how-to-get-file-size-in-python) extremely helpful in getting the size of the file. To get the hash value, i reference two webpages [Nitratine](https://nitratine.net/blog/post/how-to-hash-files-in-python/) and [Programiz](https://www.programiz.com/python-programming/examples/hash-file). Next i started working on the PowerShell script and it is called "FinalProject.ps1". I started by creating the header and then a function called "locate_file_w_hash" that will obtain the HASH value for every image in the directory "./Saved Images". This function will also complete the comparison but will create another function called "compare_hash" embedded within to make it easier. The "compare_hash" function first creates a variable with the current date and then i used this [website](https://mrpanas.com/powershell-and-sqlite/) to figure out how to query a database. I can query the database now through powershell but having an issue with filtering on the name by a specfic value. I want to be able to get the hash returned from the DB for the current date only. Finally got it to work, my query turned out to be okay but i needed to switch the ' and " around for it to successfully complete. Some how i am not able to use backspace anymore in this file...oddd...i will deal wilth it for now. I have created another function that will compare the two hashes together and will be emmbedded into the locate_file_w_hash function. I also changed the name of the function "compare_hash" to "Connection_and_query" because that is what it does and created a new function called "compare_hashes". I can sucessfully obtain the hashes however having a hell of a time getting the hash to compare sucessfully. After some trial and error finally was able to figure out how to compare my two hash values. Now i know if the image is already downloaded. I completed this by doing alot of googling and found these websites helpful: ["Microsoft Docs"](https://docs.microsoft.com/en-us/documentation/), our trusty friend ["Regex 101"](https://regex101.com/), good old powershell tests. For example, what actually solved the issue was using the cmdlets Get-Member and Get-ItemProperty within powershell after the script was done to obtain key information about the objects I was working with. In my script i need the hashes to be in the exact same format to compare the two hashes against one another and as a result i had to covert from an object to a string back to an object. When the conversion from string to object was completed the object properties became misaligned (compared to before) and I was actually working on $hash but and was outputting $hash as opposed to $hash.p4. When it converted it to an object the value i wanted was assigned the property p4 and i was comparing the entire variable opposed to just $hash.p4. I also spent way to long trying many different methods to modify the returned value for $hash to be comparible to $connection_results. I tried string concatonation (example: i had an addition line that was trying to append a ; at one point $hash2 = $hash + ";" and $hash2 = "$hash;" ) but that didnt work. Then i tried trimming the ";" off the $connection_results and that didnt wanna work either. FInally I tried the -Replace method and that worked. I browse numerous pages on the Microsoft Docs webpage including: ["Everything you need to know about $null"](https://docs.microsoft.com/en-us/powershell/scripting/learn/deep-dives/everything-about-null?view=powershell-7.1), ["About Comparison Operators"](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_comparison_operators?view=powershell-7.1), and [String.Trim](https://docs.microsoft.com/en-us/dotnet/api/system.string.trim?view=net-5.0). I Then modified my directory to saved the date of the image and the date it was obtained. This meant also modifying the Image file to that of the date of the image and not the date it was obtained. No issues here becuase it pretty straight forward. I realized when rerunning my python script to fill the database to test my powershell script on the foreach loop i created earlier, i need to put the comparison in a function as well and then i can compare each hash and not just the last file in the directory based on name. so i created a new function called "compare_hashes". Broke my script while trying to loop and am done for the night. committed changes to Github Testing branch becuase well it dont work.also i gotta deal with this error "command 'markdown.extension.onEnterKey' not found". Hoping it fix's itself before I go crazy.    